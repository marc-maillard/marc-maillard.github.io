(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,a,t){},104:function(e,a,t){},2:function(e,a,t){e.exports={icon:"calendar_icon__YMJxb",logo:"calendar_logo__WuW-9",row:"calendar_row__3HuUr","row-middle":"calendar_row-middle__1qZJ3",col:"calendar_col__3vfDM","col-start":"calendar_col-start__2on6G","col-center":"calendar_col-center__1LfkI","col-end":"calendar_col-end__1TVDL",calendar:"calendar_calendar__2G1ZW",header:"calendar_header__qFLp9",days:"calendar_days__1nlJa",body:"calendar_body__2eQQy",cell:"calendar_cell__H4MKT",calendar_empty:"calendar_calendar_empty__2eyAg",calender_sick:"calendar_calender_sick__3qzW7",calender_freePass:"calendar_calender_freePass__33wsg",calender_mandatoryXtraChallenge:"calendar_calender_mandatoryXtraChallenge__1LZyW",calender_recalledChallenge:"calendar_calender_recalledChallenge__5bZ7o",calender_failedChallenge:"calendar_calender_failedChallenge__31iVK",number:"calendar_number__kseqZ",disabled:"calendar_disabled__tE00Y",bg:"calendar_bg__NSFQJ",selected:"calendar_selected__E4FaC"}},247:function(e,a,t){},249:function(e,a,t){},251:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(94),s=t.n(l),c=(t(102),t(3)),o=t(4),i=t(6),d=t(5),u=t(7),h=(t(104),t(15)),m=t(14),p=t(44),y=t.n(p),f=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.freePass,t=this.getClasses(a);return r.a.createElement("div",{onClick:function(){return e.props.onToggleFreePass(!a)},className:t},r.a.createElement("span",{className:"display-4"},"Free Pass"))}},{key:"getClasses",value:function(e){var a="white mb-1 ";return a+=e?y.a.btn:y.a.btn_secondary}}]),a}(n.Component),_=t(45),b=t.n(_),g=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.sick,t=this.getClasses(a);return r.a.createElement("div",{onClick:function(){return e.props.onToggleSick(!a)},className:t},r.a.createElement("span",{className:"display-4"},"Sick leave"))}},{key:"getClasses",value:function(e){var a="white mb-1 ";return a+=e?b.a.btn:b.a.btn_secondary}}]),a}(n.Component),v=t(46),C=t.n(v),E=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.extraChallenge,t=this.getClasses(a);return r.a.createElement("div",{onClick:function(){return e.props.onToggleExtraChallenge(!a)},className:t},r.a.createElement("span",{className:"display-4"},"Xtra"))}},{key:"getClasses",value:function(e){var a="white mb-1 ";return a+=e?C.a.btn:C.a.btn_secondary}}]),a}(n.Component),k=t(47),O=t.n(k),j=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.mandatoryChallenge,t=this.getClasses(a);return r.a.createElement("div",{onClick:function(){return e.props.onToggleMandatoryChallenge(!a)},className:t},r.a.createElement("span",{className:"display-4"},"30'"))}},{key:"getClasses",value:function(e){var a="white mb-1 ";return a+=e?O.a.btn:O.a.btn_secondary}}]),a}(n.Component),T=t(48),S=t.n(T),w=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.props.recalledChallenge,t=this.getClasses(a);return r.a.createElement("div",{onClick:function(){return e.props.onToggleRecalledChallenge(!a)},className:t},r.a.createElement("span",{className:"display-4"},"60'"))}},{key:"getClasses",value:function(e){var a="white mb-1 ";return a+=e?S.a.btn:S.a.btn_secondary}}]),a}(n.Component),D=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"badge badge-secondary"},this.props.scoreLabel," ",r.a.createElement("span",{className:"badge badge-light"},this.props.score))}}]),a}(n.Component),N=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).HandleToggleFreePass=function(e){console.log("new Free Pass State: ",e);var a=Object(m.a)({},t.props.day);a.freePass=e,e&&(a.mandatoryChallenge=!1,a.sick=!1,a.extraChallenge=!1,a.recalledChallenge=!1),t.UpdateState(a)},t.HandleToggleMandatoryChallenge=function(e){console.log("new MandatoryChallenge State: ",e);var a=Object(m.a)({},t.props.day);a.mandatoryChallenge=e,e?(a.sick=!1,a.freePass=!1):a.recalledChallenge=!1,t.UpdateState(a)},t.HandleToggleSick=function(e){console.log("new Sick State: ",e);var a=Object(m.a)({},t.props.day);a.sick=e,e&&(a.mandatoryChallenge=!1,a.freePass=!1,a.extraChallenge=!1,a.recalledChallenge=!1),t.UpdateState(a)},t.HandleToggleExtraChallenge=function(e){console.log("new ExtraChallenge State: ",e);var a=Object(m.a)({},t.props.day);a.extraChallenge=e,e?(a.sick=!1,a.freePass=!1):a.recalledChallenge=!1,t.UpdateState(a)},t.HandleToggleRecalledChallenge=function(e){console.log("new RecalledChallenge State: ",e);var a=Object(m.a)({},t.props.day);t.props.day.mandatoryChallenge&&t.props.day.extraChallenge||(e=!1),a.recalledChallenge=e,e&&(a.sick=!1,a.freePass=!1),t.UpdateState(a)},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"UpdateState",value:function(e){var a=this.ComputedDailyScore(e);e.dailyScore=a,this.props.OnDayUpdate(e)}},{key:"ComputedDailyScore",value:function(e){var a=0;return e.sick?2:e.freePass?2:(e.mandatoryChallenge&&(a+=1),e.extraChallenge&&(a+=1),e.recalledChallenge&&(a+=1),a)}},{key:"render",value:function(){return r.a.createElement("span",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col d-flex justify-content-center"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"display-4"},this.props.day.date))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm "},r.a.createElement(j,{onToggleMandatoryChallenge:this.HandleToggleMandatoryChallenge,mandatoryChallenge:this.props.day.mandatoryChallenge})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(E,{onToggleExtraChallenge:this.HandleToggleExtraChallenge,extraChallenge:this.props.day.extraChallenge})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(w,{onToggleRecalledChallenge:this.HandleToggleRecalledChallenge,recalledChallenge:this.props.day.recalledChallenge}))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(g,{onToggleSick:this.HandleToggleSick,sick:this.props.day.sick}))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(f,{onToggleFreePass:this.HandleToggleFreePass,freePass:this.props.day.freePass})))),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},r.a.createElement(D,{scoreLabel:"Daily score",score:this.props.day.dailyScore})))))))}}]),a}(n.Component),x=t(2),M=t.n(x),P=t(8),H=t.n(P),U=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={currentMonth:new Date,selectedDate:new Date},t.onDateClick=function(e){t.setState({selectedDate:e}),t.props.onNavigateTo(e)},t.nextMonth=function(){t.setState({currentMonth:H.a.addMonths(t.state.currentMonth,1)})},t.prevMonth=function(){t.setState({currentMonth:H.a.subMonths(t.state.currentMonth,1)})},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"renderHeader",value:function(){return r.a.createElement("div",{className:[M.a.header,M.a.row,M.a["flex-middle"]].join(" ")},r.a.createElement("div",{className:[M.a.col,M.a["col-start"]].join(" ")},r.a.createElement("div",{className:M.a.icon,onClick:this.prevMonth},"chevron_left")),r.a.createElement("div",{className:[M.a.col,M.a["col-center"]].join(" ")},r.a.createElement("span",null,H.a.format(this.state.currentMonth,"MMMM YYYY"))),r.a.createElement("div",{className:[M.a.col,M.a["col-end"]].join(" ")},r.a.createElement("div",{className:M.a.icon,onClick:this.nextMonth},"chevron_right")))}},{key:"renderDays",value:function(){for(var e=[],a=H.a.startOfISOWeek(this.state.currentMonth),t=0;t<7;t++)e.push(r.a.createElement("div",{className:[M.a.col,M.a["col-center"]].join(" "),key:t},H.a.format(H.a.addDays(a,t),"dddd")));return r.a.createElement("div",{className:[M.a.days,M.a.row].join(" ")},e)}},{key:"getCellClasses",value:function(e,a,t){var n=[M.a.col,M.a.cell].join(" "),r=this.getClassFromScoreType(e);return!H.a.isSameMonth(e,a)||H.a.isAfter(e,new Date)||H.a.isBefore(e,H.a.format(this.props.startDate))||H.a.isAfter(e,H.a.format(this.props.endDate))?[n,M.a.disabled].join(" "):H.a.isSameDay(e,t)&&(n=[n,M.a.selected].join(" "),null==r)?[n,M.a.calendar_empty].join(" "):[n,this.getClassFromScoreType(e)].join(" ")}},{key:"getClassFromScoreType",value:function(e){var a=this.GetDateString(e),t=this.props.days.filter(function(e){return e.date===a});if(1===t.length){var n=t[0];if(n.freePass)return M.a.calender_freePass;if(n.sick)return M.a.calender_sick;if(n.recalledChallenge)return M.a.calender_recalledChallenge;if(n.mandatoryChallenge&&n.extraChallenge)return M.a.calender_mandatoryXtraChallenge;if(n.mandatoryChallenge||n.extraChallenge)return M.a.calender_failedChallenge}return null}},{key:"GetDateString",value:function(e){var a=new Date(e);return new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().split("T")[0]}},{key:"renderCells",value:function(){for(var e=this,a=this.state,t=a.currentMonth,n=a.selectedDate,l=H.a.startOfMonth(t),s=H.a.endOfMonth(l),c=H.a.startOfISOWeek(l),o=H.a.endOfISOWeek(s),i=[],d=[],u=c,h="";u<=o;){for(var m=function(a){h=H.a.format(u,"D");var t=u;d.push(r.a.createElement("div",{className:e.getCellClasses(u,l,n),key:u,onClick:function(){return e.onDateClick(H.a.parse(t))}},r.a.createElement("span",{className:M.a.number},h),r.a.createElement("span",{className:M.a.bg},h))),u=H.a.addDays(u,1)},p=0;p<7;p++)m();i.push(r.a.createElement("div",{className:M.a.row,key:u},d)),d=[]}return r.a.createElement("div",{className:M.a.body},i)}},{key:"render",value:function(){return r.a.createElement("div",{className:M.a.calendar},this.renderHeader(),this.renderDays(),this.renderCells())}}]),a}(n.Component),L=t(19),F=t.n(L),B=function(e){function a(){var e;Object(c.a)(this,a),(e=Object(i.a)(this,Object(d.a)(a).call(this))).HandleDailyScoreUpdate=function(e){},e.HandleDayUpdate=function(a){if(e.setState({dateToDisplay:a}),e.state.user.days.some(function(e){return e.date===a.date})){var t=Object(m.a)({},e.state.user);F.a.post("http://mama01-w10:4000/user/update/"+t._id+"/day/"+a._id,a).then(function(n){var r=Object(h.a)(e.state.user.days);r[e.state.user.days.findIndex(function(e){return e.date===a.date})]=a,t.days=r,e.setState({user:t},function(){e.CalculateTotalScore()})})}else{var n=Object(m.a)({},e.state.user);F.a.post("http://mama01-w10:4000/user/"+n._id+"/day/add",a).then(function(t){a._id=t.data._id;var r=[].concat(Object(h.a)(e.state.user.days),[a]);n.days=r,e.setState({user:n},function(){e.CalculateTotalScore()})})}},e.HandleNavigateTo=function(a){var t=e.GetDay(a);e.setState({dateToDisplay:t})},e.HandleCalendarClassnames=function(a){if("month"===a.view){var t=e.GetDay(a.date);return t.freePass?"freePassTile":t.sick?"sickTile":t.recalledChallenge?"recalledChallengeTile":t.mandatoryChallenge&&t.extraChallenge?"regularTile":"redDayTile"}return null},e.state={user:{name:"",days:[]}};var t=e.GetToday();return e.state.user.days.push(t),e.state.dateToDisplay=t,e}return Object(u.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(!this.state.user._id){var a=this.props.userName;F.a.get("http://mama01-w10:4000/user/name/"+a).then(function(a){var t=a.data;e.setState({user:t},function(){var a=e.GetToday();e.setState({dateToDisplay:a})})}).catch(function(t){var n=Object(m.a)({},e.state.user);n.name=a,F.a.post("http://mama01-w10:4000/user/add/",n).then(function(a){n._id=a.data._id,n.days[0]._id=a.data.day_id,e.setState({user:n})}).catch(function(e){})})}}},{key:"CountFreePassUsed",value:function(){return this.state.user&&this.state.user.days?Object(h.a)(this.state.user.days).filter(function(e){return!0===e.freePass}).length:0}},{key:"CountSickDays",value:function(){return this.state.user&&this.state.user.days?Object(h.a)(this.state.user.days).filter(function(e){return!0===e.sick}).length:0}},{key:"CalculateTotalScore",value:function(){if(!this.state.user||!this.state.user.days)return 0;return Object(h.a)(this.state.user.days).reduce(function(e,a){return e+a.dailyScore},0)}},{key:"GetToday",value:function(){var e=new Date;return this.GetDay(e)}},{key:"GetDay",value:function(e){var a=this.GetDateString(e),t=[];return null!=this.state&&null!=this.state.user&&null!=this.state.user.days&&(t=this.state.user.days.filter(function(e){return e.date===a})),0===t.length?{date:a,dailyScore:0,freePass:!1,mandatoryChallenge:!1,extraChallenge:!1,recalledChallenge:!1}:Object(m.a)({},t[0])}},{key:"GetDateString",value:function(e){var a=new Date(e);return new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().split("T")[0]}},{key:"render",value:function(){return console.log("state at render: ",this.state),r.a.createElement("span",null,r.a.createElement("a",{href:"/"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},r.a.createElement("span",{className:"display-4"},"Home"))),r.a.createElement("h2",null,this.props.userName),r.a.createElement(N,{OnDailyScoreUpdate:this.HandleDailyScoreUpdate,OnDayUpdate:this.HandleDayUpdate,day:this.state.dateToDisplay}),r.a.createElement(D,{scoreLabel:"Total score ",score:this.CalculateTotalScore()}),r.a.createElement(D,{scoreLabel:"Free pass used ",score:this.CountFreePassUsed()}),r.a.createElement(D,{scoreLabel:"Sick days ",score:this.CountSickDays()}),r.a.createElement(U,{onNavigateTo:this.HandleNavigateTo,days:this.state.user&&this.state.user.days?this.state.user.days:[],startDate:"2020-01-13",endDate:"2020-02-16"}))}}]),a}(n.Component),G=t(41),W=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={users:[],inputValue:""},t.handleChange=function(e){t.setState({inputValue:e.target.value})},t.handleSubmit=function(e){console.log("new user: ",t.state.inputValue),e.preventDefault(),t.props.history.push("/"+t.state.inputValue)},t.handleUserClicked=function(e,a){a.preventDefault(),console.log("handleUserClicked: ",e),t.props.history.push("/"+e)},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;F.a.get("http://mama01-w10:4000/user").then(function(a){var t=a.data,n=[];console.log(t),t.map(function(a){return n.push({name:a.name,totalScore:e.CalculateTotalScore(a)})}),e.setState({users:n},function(){console.log("state: ",e.state)})}).catch(function(e){console.log("error while fetching users. ",e)})}},{key:"CalculateTotalScore",value:function(e){if(null==e||null==e.days)return 0;return Object(h.a)(e.days).reduce(function(e,a){return e+a.dailyScore},0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.users.map(function(a){return r.a.createElement("div",{className:"row mt-2",key:a.name},r.a.createElement("div",{className:"col"},r.a.createElement("button",{type:"button",onClick:function(t){return e.handleUserClicked(a.name,t)},className:"btn btn-primary",style:{width:"75%"}},r.a.createElement("span",{className:"display-4"},a.name," ",r.a.createElement("span",{className:"badge badge-light"},a.totalScore)))))}),r.a.createElement("div",{className:"row mt-2"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",className:"btn btn-primary ml-2",value:"add new user"})))))}}]),a}(n.Component),A=Object(G.d)(W),I=t(43),J=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(l)))).specificUser=function(e){return r.a.createElement(B,{userName:e.match.params.name})},t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Container"},r.a.createElement(I.a,null,r.a.createElement(G.a,{path:"/",exact:!0,component:A}),r.a.createElement(G.a,{path:"/:name",component:this.specificUser}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(243),t(245),t(247),t(249);s.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,a,t){e.exports={btn:"freePassButton_btn__1aM5m bootstrap_btn__2TDEL",btn_secondary:"freePassButton_btn_secondary__7hkf2 bootstrap_btn__2TDEL undefined undefined bootstrap_btn-secondary__3wTxT"}},45:function(e,a,t){e.exports={btn:"sickButton_btn__3JYRs bootstrap_btn__2TDEL",btn_secondary:"sickButton_btn_secondary__17kjk bootstrap_btn__2TDEL undefined undefined bootstrap_btn-secondary__3wTxT"}},46:function(e,a,t){e.exports={btn:"extraChallengeButton_btn__3LyaC bootstrap_btn__2TDEL",btn_secondary:"extraChallengeButton_btn_secondary__2dhzf bootstrap_btn__2TDEL undefined undefined bootstrap_btn-secondary__3wTxT"}},47:function(e,a,t){e.exports={btn:"mandatoryChallengeButton_btn__3oOTN bootstrap_btn__2TDEL",btn_secondary:"mandatoryChallengeButton_btn_secondary__2Nz0v bootstrap_btn__2TDEL undefined undefined bootstrap_btn-secondary__3wTxT"}},48:function(e,a,t){e.exports={btn:"recalledChallengeButton_btn__1gb4i bootstrap_btn__2TDEL",btn_secondary:"recalledChallengeButton_btn_secondary__1ui5b bootstrap_btn__2TDEL undefined undefined bootstrap_btn-secondary__3wTxT"}},97:function(e,a,t){e.exports=t(251)}},[[97,2,1]]]);
//# sourceMappingURL=main.27c3d332.chunk.js.map